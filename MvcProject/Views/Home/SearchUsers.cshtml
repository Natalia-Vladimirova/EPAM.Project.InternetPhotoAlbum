@model IEnumerable<MvcProject.Models.UserViewModel>

@{
    ViewBag.Title = "Search";
}
<h2>@ViewBag.Title</h2>

<div class="row col-md-12 form-inline">
    @using (Html.BeginForm("SearchUsers", "Home", FormMethod.Post))
    {
        <div class="form-group">
            <input type="text" class="form-control" name="firstName" value="@ViewBag.FirstName" placeholder="Enter first name" />
        </div>
        <div class="form-group">
            <input type="text" class="form-control" name="lastName" value="@ViewBag.LastName" placeholder="Enter last name" />
        </div>
        <div class="form-group"><input type="submit" class="btn btn-default" value="Search" /></div>
    }
    <br />
    <br />
</div>
<div class="row col-md-12">
    @ShowFoundUsers(Model)
</div>



@helper ShowFoundUsers(IEnumerable<MvcProject.Models.UserViewModel> users)
{
    if (users != null)
    {
        foreach (var user in users)
        {
            <div class="row">
                <a href="@Url.Action("Index", "Home", new { id = user.Id })">
                    <div class="col-md-2">
                        @if (user.UserPhoto != null)
                        {
                            <img class="big-photo" src="data:image/jpeg;base64,@Convert.ToBase64String(user.UserPhoto)" />
                        }
                        else
                        {
                            <br />
                            <p class="text-muted text-center">No photo</p>
                        }
                    </div>
                    <div class="col-md-10">
                        <h4>@user.FirstName @user.LastName</h4>
                        <p>@user.DateOfBirth.ToShortDateString()</p>
                    </div>
                </a>
            </div>
            <br />
        }
    }
}